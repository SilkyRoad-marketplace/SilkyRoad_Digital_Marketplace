<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" href="/favicon.png">
<link rel="stylesheet" href="styles.css">

<title>Silky Road â€“ Buy & Sell Digital Products Instantly | eBooks, Templates, Creative Assets</title>

<meta name="description" content="Discover Silky Road, a full-featured digital marketplace to buy and sell eBooks, templates, creative assets, online courses and music. Secure PayPal payments, instant delivery, seller dashboard, and no upfront fees.">
<meta name="keywords" content="digital marketplace, buy digital products, sell digital products, instant downloads, ebooks, art downloads, music, photography, E-commerce platform, online store">

<style>
/* (Your existing CSS unchanged, no need to repeat for clarity) */
</style>
</head>

<body>

<!-- ðŸ”¥ HEADER injected here -->
<div id="header-placeholder"></div>

<!-- â­ BANNER -->
<div class="banner">
  <img src="banner.jpg" alt="Silky Road Marketplace Banner">
</div>

<main class="container">

<h1>Buy and Sell Digital Products Instantly â€“ eBooks, Templates, Art, Music & More</h1>

<p style="margin-top:16px;font-size:18px;line-height:1.6;">
Welcome to <strong>Silky Road</strong> â€” a modern digital marketplace where you can buy and sell high-quality digital products instantly.
</p>

<p style="font-size:18px;line-height:1.6;">
Creators can join Silky Road for free and start selling immediately without any upfront costs.
</p>

<div style="margin-top:24px;">
  <h2 style="font-size:24px;margin-bottom:12px;">Start Exploring or Become a Seller Today</h2>

  <div style="margin-top:16px;">
    <a href="category.html?category=All">
      <button style="padding:12px 18px;margin-right:10px;">Browse Products</button>
    </a>
    <a href="seller.html">
      <button style="padding:12px 18px;margin-right:10px;">Become a Seller</button>
    </a>
  </div>
</div>

<!-- â­ CATEGORY BAR -->
<div class="category-bar">
  <!-- (Your category list unchanged) -->
</div>

<section class="main">
  <h3>Featured products</h3>
  <div id="featuredGrid" class="product-grid"></div>
  <p id="featuredEmpty" class="text-muted"></p>
</section>

</main>

<!-- FOOTER -->
<footer class="footer"></footer>
<script>
fetch("footer.html?v=2")
  .then(r => r.text())
  .then(d => document.querySelector(".footer").innerHTML = d)
  .catch(e => console.error("Footer load failed:", e));
</script>

<!-- â­ Load Featured Products -->
<script type="module">
// â›” Load Supabase first
import client from "./js/supabaseClient.js";
const supabase = client;

const featuredGrid = document.getElementById("featuredGrid");
const featuredEmpty = document.getElementById("featuredEmpty");

async function loadFeatured() {
  const { data, error } = await supabase
    .from("products")
    .select("*")
    .order("created_at", { ascending: false })
    .limit(12);

  if (error) {
    console.error(error);
    featuredEmpty.textContent = "Error loading products.";
    return;
  }

  if (!data || data.length === 0) {
    featuredEmpty.textContent = "No products available yet. Check back soon!";
    return;
  }

  data.forEach(p => {
    const card = document.createElement("div");
    card.className = "card";

    const img = document.createElement("img");
    img.src = p.thumbnail_url || "placeholder.jpg";
    img.alt = p.title || "Product";
    img.style.width = "100%";
    img.style.borderRadius = "6px";
    img.style.cursor = "pointer";
    img.addEventListener("click", () => {
      window.location.href = "product.html?id=" + p.id;
    });

    const title = document.createElement("h4");
    const link = document.createElement("a");
    link.href = "product.html?id=" + p.id;
    link.textContent = p.title || "Untitled";
    link.style.textDecoration = "none";
    link.style.color = "#222";
    title.appendChild(link);

    const type = document.createElement("p");
    type.innerHTML = `<small>${p.category || ""} ${p.subcategory ? "â€“ " + p.subcategory : ""}</small>`;

    const price = document.createElement("p");
    price.innerHTML = "<strong>USD " + (p.price || 0).toFixed(2) + "</strong>";

    card.appendChild(img);
    card.appendChild(title);
    card.appendChild(type);
    card.appendChild(price);

    featuredGrid.appendChild(card);
  });
}

loadFeatured();
</script>

<!-- â­ DYNAMIC HEADER LOADER (ALWAYS LAST) -->
<script type="module">
async function loadHeader() {
  const container = document.getElementById('header-placeholder');
  const res = await fetch('/header.html');
  container.innerHTML = await res.text();
  document.dispatchEvent(new Event('header:loaded'));
}
loadHeader();
</script>

<script type="module" src="/js/supabaseClient.js"></script>
<script type="module" src="/js/header.js"></script>

</body>
</html>
