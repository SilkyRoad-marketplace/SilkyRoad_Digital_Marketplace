<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Become a Seller - Silky Road</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" href="/favicon.ico">
<title>Silky Road</title>
<style>
body{font-family:Arial,Helvetica,sans-serif;margin:0;padding:0;background:#f7f7f9;color:#222}
.header{background:#fff;border-bottom:1px solid #e4e4e8}
.container{max-width:1100px;margin:0 auto;padding:16px}
nav{display:flex;align-items:center;justify-content:space-between}
nav .links a{margin-left:12px;text-decoration:none;color:#333;font-weight:600}
.banner img{width:100%;height:auto;display:block}
.row{display:flex;gap:16px;margin-top:16px}
.sidebar{width:220px;background:#fff;padding:12px;border:1px solid #e6e6ea}
.main{flex:1}
.product-grid{display:flex;flex-wrap:wrap;gap:12px}
.card{background:#fff;padding:12px;border:1px solid #e6e6ea;width:calc(33.333% - 8px);box-sizing:border-box}
.footer{background:#222;color:#fff;padding:12px;margin-top:20px;text-align:center}
.pagination{margin-top:12px;text-align:center}
button, input[type=submit]{background:#2b6ef6;color:#fff;border:none;padding:10px 14px;border-radius:6px;cursor:pointer}
input, textarea{width:100%;padding:8px;margin-bottom:8px;border:1px solid #cfcfd3;border-radius:4px}
small{color:#666}
.notice{background:#fff3cd;padding:10px;border:1px solid #ffeeba;margin-bottom:12px}
</style>

</head><body>
<header class="header"><div class="container"><nav><div class="logo"><strong>Silky Road</strong></div><div class="links"><a href="index.html">Home</a><a href="contact.html">Contact Us</a><a href="seller.html">Become a Seller</a><a href="dashboard.html"><button>Seller Login</button></a></div></nav></div></header>
<div class="banner"><img src="banner.jpg" alt="Banner"></div>

<main class="container">
  <h2>Become a Seller</h2>
  <div class="notice">
    Want to sell your digital products here? Sign up now to become a seller and upload your digital products here with a single upload not more then 10 mb per upload. You don't have to pay any upfront costs. We only take 15% for every sales that you made. Your files are safe and secure here. After customer payment, your file will be deliver to the customer's email address as a download link for customer to download. The download link will expire after three days, so you don't have to worry about unauthorized access of your file in future. You need a paypal account to receive payment here. Payment will automatically release to your paypal account after 3 days of customer purchase.
  </div>

  <p><a href="signup.html"><button>Sign Up</button></a> <a href="dashboard.html"><button>Seller Login</button></a></p>

  <h3>Upload demo (requires Supabase storage configured)</h3>
  <p>Note: this demo upload will attempt to upload to your Supabase Storage bucket named <code>seller-uploads</code>. Configure SUPABASE_URL &amp; SUPABASE_ANON_KEY in <code>/js/supabase-config.js</code>.</p>
  <form id="uploadForm">
    <label>Product title<input id="prodTitle" required></label>
    <label>Choose file (max 10 MB)<input id="fileInput" type="file" required></label>
    <input type="submit" value="Upload">
  </form>
  <div id="uploadStatus"></div>
</main>
<footer class="footer">Silky Road Demo</footer>

<script src="https://unpkg.com/@supabase/supabase-js/dist/umd/supabase.js"></script>
<script src="js/supabase-config.js"></script>
<script>
const supabase = supabaseJs.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

document.getElementById('uploadForm').addEventListener('submit', async function(e){
  e.preventDefault();
  const f = document.getElementById('fileInput').files[0];
  const title = document.getElementById('prodTitle').value.trim();
  if(!f) return alert('Select a file');
  if(f.size > 10*1024*1024) return alert('File exceeds 10 MB limit.');
  const filename = Date.now() + '_' + f.name.replace(/[^a-z0-9\.\-_]/gi,'_');
  document.getElementById('uploadStatus').textContent = 'Uploading...';
  try{
    // upload to bucket 'seller-uploads'
    const { data, error } = await supabase.storage.from('seller-uploads').upload(filename, f);
    if(error) throw error;
    // create a DB row in 'products' table
    const { error: insertErr } = await supabase.from('products').insert([{
      title: title, filename: filename, bucket: 'seller-uploads', seller_id: 'demo_seller', price: 1.00, created_at: new Date().toISOString()
    }]);
    if(insertErr) throw insertErr;
    document.getElementById('uploadStatus').textContent = 'Upload complete. Product saved.';
    document.getElementById('uploadForm').reset();
  }catch(err){
    console.error(err);
    document.getElementById('uploadStatus').textContent = 'Upload failed: ' + (err.message || err);
  }
});
</script>
</body></html>
